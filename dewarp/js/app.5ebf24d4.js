(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],h=0,d=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},r=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},2:function(t,e){},3:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{directives:[{name:"resize",rawName:"v-resize",value:t.updateCanvasSize,expression:"updateCanvasSize"}]},[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("h1",[t._v("Page Dewarp")])]),n("v-content",{staticStyle:{margin:"2% 2%"}},[n("div",[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:t.mobile?12:6}},[n("v-card",{staticClass:"pa-1",attrs:{outlined:""}},[n("div",{staticStyle:{position:"relative"},attrs:{id:"canvasDiv"}},[n("canvas",{staticStyle:{position:"absolute",top:"0",left:"0"},attrs:{id:"canvas"}}),n("canvas",{staticStyle:{position:"absolute",top:"0",left:"0",width:"50%",height:"50%"},attrs:{id:"magnifier"}})])])],1),n("v-col",{attrs:{cols:t.mobile?12:6}},[n("v-card",{staticClass:"mx-auto pa-3",attrs:{outlined:""}},[n("div",{staticClass:"my-1",staticStyle:{display:"flex","flex-direction":"row"}},[n("v-file-input",{attrs:{label:"Select image file"},on:{change:t.updateImage}}),n("div",{staticClass:"mx-3"}),n("v-btn-toggle",{staticClass:"align-center",attrs:{mandatory:"",dense:""},model:{value:t.splineNodePosition,callback:function(e){t.splineNodePosition=e},expression:"splineNodePosition"}},[n("v-btn",{attrs:{value:"lower"}},[n("v-icon",[t._v("mdi-format-vertical-align-bottom")])],1),n("v-btn",{attrs:{value:"upper"}},[n("v-icon",[t._v("mdi-format-vertical-align-top")])],1)],1)],1),n("v-slider",{staticClass:"align-center",attrs:{min:"0.2",max:"2.0",step:"0.001",label:"View depth : Width"},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{"single-line":"",type:"number"},model:{value:t.viewDepth,callback:function(e){t.viewDepth=e},expression:"viewDepth"}})]},proxy:!0}]),model:{value:t.viewDepth,callback:function(e){t.viewDepth=e},expression:"viewDepth"}}),n("v-slider",{staticClass:"align-center",attrs:{min:"-4",max:"4",step:"0.001",label:"Left Slope"},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{"single-line":"",type:"number"},model:{value:t.leftSlope,callback:function(e){t.leftSlope=e},expression:"leftSlope"}})]},proxy:!0}]),model:{value:t.leftSlope,callback:function(e){t.leftSlope=e},expression:"leftSlope"}}),n("v-slider",{staticClass:"align-center",attrs:{min:"-4",max:"4",step:"0.001",label:"Right Slope"},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{"single-line":"",type:"number"},model:{value:t.rightSlope,callback:function(e){t.rightSlope=e},expression:"rightSlope"}})]},proxy:!0}]),model:{value:t.rightSlope,callback:function(e){t.rightSlope=e},expression:"rightSlope"}}),n("v-slider",{staticClass:"align-center",attrs:{min:"100",max:"3000",step:"100",label:"Output width in pixels"},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{"single-line":"",type:"number"},model:{value:t.resultWidth,callback:function(e){t.resultWidth=e},expression:"resultWidth"}})]},proxy:!0}]),model:{value:t.resultWidth,callback:function(e){t.resultWidth=e},expression:"resultWidth"}}),n("div",{staticClass:"my-1",staticStyle:{display:"flex","flex-direction":"row"}},[n("v-btn",{staticClass:"align-center ma-auto",attrs:{disabled:t.working},on:{click:t.dewarp}},[t._v("Dewarp")])],1)],1),n("div",{staticStyle:{"min-height":"20px"}}),n("v-card",{staticClass:"mx-auto",attrs:{id:"resultDiv"}},[n("v-progress-linear",{key:t.progress,staticClass:"align-center",attrs:{value:t.progress}}),n("canvas",{staticClass:"pt-2",attrs:{id:"result"}})],1)],1)],1)],1)],1),n("img",{staticStyle:{display:"none"},attrs:{id:"imageOriginal",src:t.imageUrl,alt:""}}),n("canvas",{staticStyle:{display:"none"},attrs:{id:"original"}})])],1)},r=[],s=(n("d81d"),n("ace4"),n("4057"),n("d3b7"),n("8a79"),n("3ca3"),n("cfc3"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a9"),n("72f7"),n("159b"),n("ddb0"),n("2b3d"),n("3835")),o=n("7a94"),c=n("3db5"),l=n("78a3"),u=n.n(l),h=n("efcd"),d=n.n(h),p={name:"App",created:function(){this.nodeCount=5,this.nodeCountBetweenKnots=8,this.nodeCountTotal=this.nodeCount+2+this.nodeCountBetweenKnots*(this.nodeCount+1),this.magnification=1.5,this.cornerNodeRadius=12,this.curveNodeRadius=8,this.boundingBoxOptions={stroke:"orangered",strokeWidth:1,strokeLineJoin:"bevil",fill:null,left:0,top:0,opacity:.8,selectable:!1,objectCaching:!1},this.hoveringBoxOptions={stroke:"green",strokeWidth:1,strokeLineJoin:"bevil",fill:null,left:0,top:0,opacity:.8,selectable:!1,objectCaching:!1},this.curveOptions={stroke:"blue",fill:null,strokeWidth:1,selectable:!1,objectCaching:!1},this.curveNodeOptions={opacity:.8,radius:this.curveNodeRadius,stroke:"red",fill:null},this.cornerNodeOptions={opacity:.8,radius:this.cornerNodeRadius,stroke:"red",fill:null},this.wasmModule=u()({locateFile:function(t){return t.endsWith(".wasm")?d.a:t}}),this.wasmModule.onRuntimeInitialized=function(){console.log("Completed WebAssembly initialization!")},this.webAssemblyMode=!0},mounted:function(){var t=this;this.updateCanvasSize(),this.canvas=new o["fabric"].Canvas("canvas"),this.canvasVanilla=document.getElementById("canvas"),this.magnifier=document.getElementById("magnifier"),this.canvasDiv=document.getElementById("canvasDiv"),this.resultDiv=document.getElementById("resultDiv"),this.canvasOriginal=document.getElementById("original"),this.canvasResult=document.getElementById("result"),this.imageOriginal=document.getElementById("imageOriginal"),this.canvas.selection=!1,this.resultDiv.style.display="none",this.boundingBox=new o["fabric"].Polygon(this.zeroInitFabricCoords(this.corners.length),this.boundingBoxOptions),this.canvas.add(this.boundingBox),this.canvasResizeListeners.push(this.updateBoundingBox),this.hoveringBox=new o["fabric"].Polygon(this.zeroInitFabricCoords(this.corners.length),this.hoveringBoxOptions),this.canvas.add(this.hoveringBox),this.canvasResizeListeners.push(this.updateHoveringBox),this.lowerCurve=new o["fabric"].Polyline(this.zeroInitFabricCoords(this.nodeCountTotal),this.curveOptions),this.upperCurve=new o["fabric"].Polyline(this.zeroInitFabricCoords(this.nodeCountTotal),this.curveOptions),this.canvas.add(this.lowerCurve),this.canvas.add(this.upperCurve),this.canvasResizeListeners.push(this.updateBothCurves);for(var e=0;e<this.nodeCount;e++){this.splineNodes.push([(e+1)/(this.nodeCount+1),0]);var n=new o["fabric"].Circle(this.curveNodeOptions);n.lockRotation=n.lockUniScaling=!0,n.hasControls=n.hasBorders=!1,n.on("moving",this.updateCurveNodeOnManipulation(e)),this.canvasResizeListeners.push(this.updateCurveNodeDisplay(e,n)),this.curveUpdateListeners.push(this.updateCurveNodeDisplay(e,n)),this.canvas.add(n)}this.corners.forEach((function(e){var n=new o["fabric"].Circle(t.cornerNodeOptions);n.lockRotation=n.lockUniScaling=!0,n.hasControls=n.hasBorders=!1,n.on("moving",t.updateCornerNodeOnManipulation(e)),t.canvasResizeListeners.push(t.updateCornerNodeDisplay(e,n)),t.canvas.add(n)})),this.hideMagnifier(),this.canvas.on("object:moving",this.showAndUpdateMagnifier),this.canvas.on("object:moved",this.hideMagnifier),this.updateEverything()},methods:{toCanvasCoord:function(t){return[(t[0]+.5)*this.canvasWidth,t[1]*this.canvasWidth+.5*this.canvasHeight]},fromCanvasCoord:function(t){return[t[0]/this.canvasWidth-.5,(t[1]-.5*this.canvasHeight)/this.canvasWidth]},zeroInitFabricCoords:function(t){for(var e=[],n=0;n<t;n++)e.push({x:0,y:0});return e},checkInBound:function(t){var e=this.toCanvasCoord(t),n=.05*this.canvasWidth,i=.05*this.canvasHeight;this.$set(t,0,e[0]<n?this.fromCanvasCoord([n,0])[0]:e[0]>this.canvasWidth-n?this.fromCanvasCoord([this.canvasWidth-n,0])[0]:t[0]),this.$set(t,1,e[1]<i?this.fromCanvasCoord([0,i])[1]:e[1]>this.canvasHeight-i?this.fromCanvasCoord([0,this.canvasHeight-i])[1]:t[1])},updateCanvasSize:function(){var t=this;this.mobile=window.innerHeight/window.innerWidth>1,this.$nextTick((function(){o["fabric"].Image.fromURL(t.imageUrl,(function(e){t.canvasWidth=t.canvasDiv.clientWidth,t.canvasHeight=0!==e.width?e.height/e.width*t.canvasDiv.clientWidth:0,t.canvas.setWidth(t.canvasWidth).setHeight(t.canvasHeight);for(var n=0;n<t.corners.length;n++)t.checkInBound(t[t.corners[n]]);t.canvasResizeListeners.forEach((function(t){return t()})),t.canvas.setBackgroundImage(e,t.canvas.renderAll.bind(t.canvas),{scaleX:t.canvas.width/e.width,scaleY:t.canvas.height/e.height})}))}))},updateImage:function(t){t&&(this.imageUrl=window.URL.createObjectURL(t),this.imageOriginal.crossOrigin="Anonymous",this.updateCanvasSize())},updateBoundingBox:function(){for(var t=0;t<this.corners.length;t++){var e=this.toCanvasCoord(this[this.corners[t]]);this.boundingBox.points[t].x=e[0]-this.boundingBox.strokeWidth/3,this.boundingBox.points[t].y=e[1]-this.boundingBox.strokeWidth/3}this.boundingBox.setCoords()},updateHoveringBox:function(){for(var t=0;t<this.corners.length;t++){var e=this.toCanvasCoord(this.project(Object(c["a"])(this[this.corners[t]+"3D"],Object(c["i"])(this.normalVec,.05))));this.hoveringBox.points[t].x=e[0]-this.hoveringBox.strokeWidth/3,this.hoveringBox.points[t].y=e[1]-this.hoveringBox.strokeWidth/3}this.hoveringBox.setCoords()},updateCurve:function(t){for(var e=this[t+"Curve"],n=this[t+"Left3D"],i=this.clampedSpline(),a=0;a<=this.nodeCount;a++)for(var r=Object(s["a"])(i[a],4),o=r[0],l=r[1],u=r[2],h=r[3],d=0===a?0:this.splineNodes[a-1][0],p=a===this.nodeCount?1:this.splineNodes[a][0],f=(p-d)/(this.nodeCountBetweenKnots+1),v=0;v<=this.nodeCountBetweenKnots;v++){var g=d+v*f,b=((h*g+u)*g+l)*g+o,m=this.toCanvasCoord(this.project(Object(c["a"])(n,Object(c["a"])(Object(c["i"])(this.baseVec,g),Object(c["i"])(this.normalVec,b)))));e.points[a*(this.nodeCountBetweenKnots+1)+v].x=m[0],e.points[a*(this.nodeCountBetweenKnots+1)+v].y=m[1]}var w=this.toCanvasCoord(this[t+"Right"]);e.points[this.nodeCountTotal-1].x=w[0],e.points[this.nodeCountTotal-1].y=w[1],e.setCoords()},updateBothCurves:function(){this.updateCurve("lower"),this.updateCurve("upper")},updateCurveNodeOnManipulation:function(t){var e=this;return function(n){var i=Object(c["l"])(e.projectBackToBasePlane(e.fromCanvasCoord([n.target.left+e.curveNodeRadius,n.target.top+e.curveNodeRadius])),e[e.splineNodePosition+"Left3D"]);e.splineNodes[t][0]=Object(c["g"])(i,e.baseVec)/Object(c["g"])(e.baseVec,e.baseVec),e.splineNodes[t][1]=Object(c["g"])(i,e.normalVec)/Object(c["g"])(e.normalVec,e.normalVec),e.updateBothCurves()}},updateCurveNodeDisplay:function(t,e){var n=this;return function(){var i=n.toCanvasCoord(n.project(Object(c["a"])(n[n.splineNodePosition+"Left3D"],Object(c["a"])(Object(c["i"])(n.baseVec,n.splineNodes[t][0]),Object(c["i"])(n.normalVec,n.splineNodes[t][1])))));e.set("left",i[0]-n.curveNodeRadius),e.set("top",i[1]-n.curveNodeRadius),e.setCoords()}},updateCornerNodeOnManipulation:function(t){var e=this;return function(n){e[t]=e.fromCanvasCoord([n.target.left+e.cornerNodeRadius,n.target.top+e.cornerNodeRadius]),e.updateEverything()}},updateCornerNodeDisplay:function(t,e){var n=this;return function(){var i=n.toCanvasCoord(n[t]);e.set("left",i[0]-n.cornerNodeRadius),e.set("top",i[1]-n.cornerNodeRadius),e.setCoords()}},updateEverything:function(){this.updateBoundingBox(),this.updateHoveringBox(),this.updateBothCurves(),this.curveUpdateListeners.forEach((function(t){return t()}))},showAndUpdateMagnifier:function(t){this.magnifier.style.zIndex="1";var e=t.pointer.x<.5*this.canvasWidth,n=t.pointer.y<.5*this.canvasHeight;this.magnifier.style.left=e?"50%":"0",this.magnifier.style.top=n?"0":"50%";var i=this.canvasVanilla.width/this.canvasWidth,a=this.canvasWidth*i*.5/this.magnification,r=this.canvasHeight*i*.5/this.magnification;this.magnifier.width=a,this.magnifier.height=r;var s=Math.max(t.pointer.x*i-a/2,0);s=Math.min(s,this.canvasWidth*i-a);var o=Math.max(t.pointer.y*i-r/2,0);o=Math.min(o,this.canvasHeight*i-r);var c=this.magnifier.getContext("2d");c.drawImage(this.canvasVanilla,s,o,a,r,0,0,a,r)},hideMagnifier:function(){this.magnifier.style.zIndex="-1"},projectBackToBasePlane:function(t){var e=this.basePlane,n=(e[0]*t[0]+e[1]*t[1])/this.viewDepth+e[2],i=e[3]-e[0]*t[0]-e[1]*t[1],a=i/n;return Object(c["b"])(Object(c["i"])(t,1+a/this.viewDepth),[a])},project:function(t){return[t[0]/(1+t[2]/this.viewDepth),t[1]/(1+t[2]/this.viewDepth)]},clampedSpline:function(){var t=this.splineNodes.map(o["fabric"].util.object.clone);t.unshift([0,0]),t.push([1,0]);for(var e=t.length-1,n=Object(c["m"])(4*e,4*e),i=Object(c["m"])(4*e),a=0;a<e;a++){i.set([4*a],t[a][1]);for(var r=0;r<4;r++)n.set([4*a,4*a+r],Object(c["k"])(t[a][0],r));i.set([4*a+1],t[a+1][1]);for(var s=0;s<4;s++)n.set([4*a+1,4*a+s],Object(c["k"])(t[a+1][0],s));a<e-1&&(n.set([4*a+2,4*a+1],1),n.set([4*a+2,4*a+2],2*t[a+1][0]),n.set([4*a+2,4*a+3],3*Object(c["k"])(t[a+1][0],2)),n.set([4*a+2,4*a+5],-1),n.set([4*a+2,4*a+6],-2*t[a+1][0]),n.set([4*a+2,4*a+7],-3*Object(c["k"])(t[a+1][0],2)),n.set([4*a+3,4*a+2],2),n.set([4*a+3,4*a+3],6*t[a+1][0]),n.set([4*a+3,4*a+6],-2),n.set([4*a+3,4*a+7],-6*t[a+1][0]))}n.set([4*e-2,1],1),n.set([4*e-2,2],2*t[0][0]),n.set([4*e-2,3],3*Object(c["k"])(t[0][0],2)),i.set([4*e-2],this.leftSlope),n.set([4*e-1,4*e-3],1),n.set([4*e-1,4*e-2],2*t[e][0]),n.set([4*e-1,4*e-1],3*Object(c["k"])(t[e][0],2)),i.set([4*e-1],this.rightSlope);for(var l=Object(c["h"])(n,i),u=[],h=0;h<e;h++)u.push([l.get([4*h,0]),l.get([4*h+1,0]),l.get([4*h+2,0]),l.get([4*h+3,0])]);return u},criticalPointsSimpson:function(t,e){for(var n=this,i=1e-4,a=0,r=[],o=function(e){for(var o=Object(s["a"])(t[e],4),c=o[0],l=o[1],u=o[2],h=o[3],d=0===e?0:n.splineNodes[e-1][0],p=e===n.nodeCount?1:n.splineNodes[e][0],f=function(t){return Math.hypot(1,(3*h*t+2*u)*t+l)},v=d;v<p;v+=i){var g=Math.min(p-v,i);a+=(f(v)+4*f(v+g/2)+f(v+g))*g/6,r.push([v,a,((h*v+u)*v+l)*v+c])}},c=0;c<=this.nodeCount;c++)o(c);for(var l=[],u=0,h=1;h<=e;h++){var d=h/e*a;while(u+1<r.length&&r[u+1][1]<=d)u++;var p=r[u],f=u+1===r.length?[1,a,0]:r[u+1];l.push(d-p[1]<=f[1]-d?[p[0],p[2]]:[f[0],f[2]])}return[a,l]},dewarp:function(){var t=this;this.working=!0,setTimeout((function(){t.resultDiv.style.display="initial";var e=t.imageOriginal.width,n=t.imageOriginal.height;t.canvasOriginal.width=e,t.canvasOriginal.height=n;var i=t.canvasOriginal.getContext("2d");i.drawImage(t.imageOriginal,0,0);var a=t.criticalPointsSimpson(t.clampedSpline(),t.resultWidth),r=Object(s["a"])(a,2),o=r[0],l=r[1],u=Object(c["l"])(t.lowerLeft3D,t.upperLeft3D),h=l.length,d=Math.round(h/(o*Object(c["j"])(t.baseVec))*Object(c["j"])(u));t.canvasResult.width=h,t.canvasResult.height=d,t.canvasResult.style.width="100%";var p=t.canvasResult.getContext("2d");t.canvasResult.style.display="initial";var f=i.getImageData(0,0,e,n);if(t.progress=0,t.webAssemblyMode){var v=[],g=[];l.forEach((function(t){v.push(t[0]),g.push(t[1])}));var b=t.wasmModule.dewarp(f.data,e,n,h,d,new Float32Array(v),new Float32Array(g),new Float32Array(t.upperLeft3D),new Float32Array(t.baseVec),new Float32Array(t.normalVec),new Float32Array(u),t.viewDepth);p.putImageData(new ImageData(b,h,d),0,0),t.working=!1;var m=document.createElement("a");m.download="Result.jpg",m.href=t.canvasResult.toDataURL("image/jpeg",.8),m.click()}else(function(){for(var n=100/h,i=0,a=p.createImageData(h,d),r=function(r){var s=Object(c["a"])(t.upperLeft3D,Object(c["i"])(t.baseVec,l[r][0]),Object(c["i"])(t.normalVec,l[r][1]));setTimeout((function(){for(var o=0;o<d;o++){var l=Object(c["i"])(t.toCanvasCoord(t.project(Object(c["a"])(s,Object(c["i"])(u,o/d)))),e/t.canvasWidth),v=4*(o*h+r),g=4*(Math.round(l[1])*e+Math.round(l[0]));a.data[v]=f.data[g],a.data[v+1]=f.data[g+1],a.data[v+2]=f.data[g+2],a.data[v+3]=f.data[g+3]}if(t.progress+=n,++i===h){p.putImageData(a,0,0),t.working=!1;var b=document.createElement("a");b.download="Result.png",b.href=t.canvasResult.toDataURL(),b.click()}}),0)},s=0;s<h;s++)r(s)})()}),0)}},computed:{det:function(){return Object(c["e"])(Object(c["d"])(Object(c["b"])([Object(c["l"])(this.upperLeft,this.lowerRight)],[Object(c["l"])(this.lowerRight,this.upperRight)],0)))},upperLeftDepth:function(){return Object(c["e"])(Object(c["d"])(Object(c["b"])([Object(c["l"])(this.lowerLeft,this.lowerRight)],[Object(c["l"])(this.lowerRight,this.upperRight)],0)))/this.det},upperRightDepth:function(){return Object(c["e"])(Object(c["d"])(Object(c["b"])([Object(c["l"])(this.upperLeft,this.lowerRight)],[Object(c["l"])(this.lowerLeft,this.lowerRight)],0)))/this.det},lowerRightDepth:function(){return this.upperRightDepth-this.upperLeftDepth+1},lowerLeft3D:function(){return Object(c["b"])(this.lowerLeft,[0])},upperLeft3D:function(){return Object(c["b"])(Object(c["i"])(this.upperLeft,this.upperLeftDepth),[(this.upperLeftDepth-1)*this.viewDepth])},upperRight3D:function(){return Object(c["b"])(Object(c["i"])(this.upperRight,this.upperRightDepth),[(this.upperRightDepth-1)*this.viewDepth])},lowerRight3D:function(){return Object(c["b"])(Object(c["i"])(this.lowerRight,this.lowerRightDepth),[(this.lowerRightDepth-1)*this.viewDepth])},basePlane:function(){var t=Object(c["c"])(this.normalVec,Object(c["l"])(this.lowerLeft3D,this.lowerRight3D));return Object(c["b"])(t,[Object(c["g"])(t,this[this.splineNodePosition+"Left3D"])])},baseVec:function(){return Object(c["l"])(this.lowerRight3D,this.lowerLeft3D)},normalVec:function(){var t=Object(c["c"])(Object(c["l"])(this.lowerLeft3D,this.lowerRight3D),Object(c["l"])(this.lowerLeft3D,this.upperLeft3D));return Object(c["f"])(t,Object(c["j"])(t))}},watch:{viewDepth:function(){this.updateEverything(),this.canvas.renderAll()},leftSlope:function(){this.updateBothCurves(),this.canvas.renderAll()},rightSlope:function(){this.updateBothCurves(),this.canvas.renderAll()},splineNodePosition:function(){this.curveUpdateListeners.forEach((function(t){return t()})),this.canvas.renderAll()}},data:function(){return{imageUrl:n("7637"),canvasDiv:null,resultDiv:null,imageOriginal:null,canvas:null,canvasVanilla:null,canvasOriginal:null,canvasResult:null,magnifier:null,canvasWidth:0,canvasHeight:0,viewDepth:25.5/25.1,leftSlope:0,rightSlope:0,lowerLeft:[-.4,.4],upperLeft:[-.4,-.4],lowerRight:[.4,.4],upperRight:[.4,-.4],corners:["lowerLeft","upperLeft","upperRight","lowerRight"],boundingBox:null,hoveringBox:null,lowerCurve:null,upperCurve:null,mobile:!1,splineNodes:[],splineNodePosition:"lower",canvasResizeListeners:[],curveUpdateListeners:[],resultWidth:1600,progress:0,working:!1}}},f=p,v=n("2877"),g=n("6544"),b=n.n(g),m=n("7496"),w=n("40dc"),y=n("8336"),C=n("a609"),O=n("b0af"),j=n("62ad"),x=n("a523"),R=n("a75b"),D=n("23a7"),S=n("132d"),k=n("8e36"),B=n("0fd9"),A=n("ba0d"),L=n("8654"),W=n("269a"),I=n.n(W),N=n("dc22"),E=Object(v["a"])(f,a,r,!1,null,null,null),P=E.exports;b()(E,{VApp:m["a"],VAppBar:w["a"],VBtn:y["a"],VBtnToggle:C["a"],VCard:O["a"],VCol:j["a"],VContainer:x["a"],VContent:R["a"],VFileInput:D["a"],VIcon:S["a"],VProgressLinear:k["a"],VRow:B["a"],VSlider:A["a"],VTextField:L["a"]}),I()(E,{Resize:N["a"]});var M=n("f309");i["a"].use(M["a"]);var _=new M["a"]({});i["a"].config.productionTip=!1,new i["a"]({vuetify:_,render:function(t){return t(P)}}).$mount("#app")},7637:function(t,e,n){t.exports=n.p+"img/usage.8a4be827.jpg"},"78a3":function(t,e,n){(function(t){var i,a;n("c975"),n("baa5"),n("ace4"),n("d3b7"),n("2ca0"),n("cfc3"),n("4a9b"),n("fd87"),n("8b09"),n("143c"),n("5cc6"),n("8a59"),n("84c3"),n("fb2c"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a9"),n("72f7");var r=n("7037"),s=function(){var t="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return function(e){e=e||{};e="undefined"!==typeof e?e:{};var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);var a,s=[],o=!0,c=!1,l="";function u(t){return e["locateFile"]?e["locateFile"](t,l):l+t}(o||c)&&(c?l=self.location.href:document.currentScript&&(l=document.currentScript.src),t&&(l=t),l=0!==l.indexOf("blob:")?l.substr(0,l.lastIndexOf("/")+1):"",function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},c&&(a=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),function(t,e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?e(i.response):n()},i.onerror=n,i.send(null)});var h,d,p=e["print"]||console.log.bind(console),f=e["printErr"]||console.warn.bind(console);for(n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);i=null,e["arguments"]&&(s=e["arguments"]),e["thisProgram"]&&e["thisProgram"],e["quit"]&&e["quit"],e["wasmBinary"]&&(h=e["wasmBinary"]),e["noExitRuntime"]&&e["noExitRuntime"],"object"!==("undefined"===typeof WebAssembly?"undefined":r(WebAssembly))&&f("no native wasm support detected");var v=new WebAssembly.Table({initial:1,maximum:1,element:"anyfunc"}),g=!1;function b(t,e){t||tt("Assertion failed: "+e)}function m(t){var n=e["_"+t];return b(n,"Cannot call unknown function "+t+", make sure it is exported"),n}function w(t,e,n,i,a){var r={string:function(t){var e=0;if(null!==t&&void 0!==t&&0!==t){var n=1+(t.length<<2);e=gt(n),x(t,e,n)}return e},array:function(t){var e=gt(t.length);return R(t,e),e}};function s(t){return"string"===e?O(t):"boolean"===e?Boolean(t):t}var o=m(t),c=[],l=0;if(i)for(var u=0;u<i.length;u++){var h=r[n[u]];h?(0===l&&(l=vt()),c[u]=h(i[u])):c[u]=i[u]}var d=o.apply(null,c);return d=s(d),0!==l&&bt(l),d}var y="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(t,e,n){var i=e+n,a=e;while(t[a]&&!(a>=i))++a;if(a-e>16&&t.subarray&&y)return y.decode(t.subarray(e,a));var r="";while(e<a){var s=t[e++];if(128&s){var o=63&t[e++];if(192!=(224&s)){var c=63&t[e++];if(s=224==(240&s)?(15&s)<<12|o<<6|c:(7&s)<<18|o<<12|c<<6|63&t[e++],s<65536)r+=String.fromCharCode(s);else{var l=s-65536;r+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else r+=String.fromCharCode((31&s)<<6|o)}else r+=String.fromCharCode(s)}return r}function O(t,e){return t?C(k,t,e):""}function j(t,e,n,i){if(!(i>0))return 0;for(var a=n,r=n+i-1,s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o>=55296&&o<=57343){var c=t.charCodeAt(++s);o=65536+((1023&o)<<10)|1023&c}if(o<=127){if(n>=r)break;e[n++]=o}else if(o<=2047){if(n+1>=r)break;e[n++]=192|o>>6,e[n++]=128|63&o}else if(o<=65535){if(n+2>=r)break;e[n++]=224|o>>12,e[n++]=128|o>>6&63,e[n++]=128|63&o}else{if(n+3>=r)break;e[n++]=240|o>>18,e[n++]=128|o>>12&63,e[n++]=128|o>>6&63,e[n++]=128|63&o}}return e[n]=0,n-a}function x(t,e,n){return j(t,k,e,n)}"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function R(t,e){S.set(t,e)}var D,S,k,B,A=65536;function L(t,e){return t%e>0&&(t+=e-t%e),t}function W(t){D=t,e["HEAP8"]=S=new Int8Array(t),e["HEAP16"]=new Int16Array(t),e["HEAP32"]=B=new Int32Array(t),e["HEAPU8"]=k=new Uint8Array(t),e["HEAPU16"]=new Uint16Array(t),e["HEAPU32"]=new Uint32Array(t),e["HEAPF32"]=new Float32Array(t),e["HEAPF64"]=new Float64Array(t)}var I=5244576,N=1536,E=e["TOTAL_MEMORY"]||16777216;function P(t){while(t.length>0){var n=t.shift();if("function"!=typeof n){var i=n.func;"number"===typeof i?void 0===n.arg?e["dynCall_v"](i):e["dynCall_vi"](i,n.arg):i(void 0===n.arg?null:n.arg)}else n()}}d=e["wasmMemory"]?e["wasmMemory"]:new WebAssembly.Memory({initial:E/A}),d&&(D=d.buffer),E=D.byteLength,W(D),B[N>>2]=I;var M=[],_=[],V=[],T=[];function U(){if(e["preRun"]){"function"==typeof e["preRun"]&&(e["preRun"]=[e["preRun"]]);while(e["preRun"].length)K(e["preRun"].shift())}P(M)}function H(){!0,P(_)}function z(){P(V)}function F(){if(e["postRun"]){"function"==typeof e["postRun"]&&(e["postRun"]=[e["postRun"]]);while(e["postRun"].length)q(e["postRun"].shift())}P(T)}function K(t){M.unshift(t)}function q(t){T.unshift(t)}var $=Math.ceil,J=Math.floor,X=0,G=null,Y=null;function Q(t){X++,e["monitorRunDependencies"]&&e["monitorRunDependencies"](X)}function Z(t){if(X--,e["monitorRunDependencies"]&&e["monitorRunDependencies"](X),0==X&&(null!==G&&(clearInterval(G),G=null),Y)){var n=Y;Y=null,n()}}function tt(t){throw e["onAbort"]&&e["onAbort"](t),t+="",p(t),f(t),g=!0,1,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(t)}e["preloadedImages"]={},e["preloadedAudios"]={};var et="data:application/octet-stream;base64,";function nt(t){return String.prototype.startsWith?t.startsWith(et):0===t.indexOf(et)}var it="dewarp.wasm";function at(){try{if(h)return new Uint8Array(h);if(a)return a(it);throw"both async and sync fetching of the wasm failed"}catch(f){tt(f)}}function rt(){return h||!o&&!c||"function"!==typeof fetch?new Promise((function(t,e){t(at())})):fetch(it,{credentials:"same-origin"}).then((function(t){if(!t["ok"])throw"failed to load wasm binary file at '"+it+"'";return t["arrayBuffer"]()})).catch((function(){return at()}))}function st(){var t={env:ht,wasi_snapshot_preview1:ht};function n(t,n){var i=t.exports;e["asm"]=i,Z("wasm-instantiate")}function i(t){n(t["instance"])}function a(e){return rt().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(t){f("failed to asynchronously prepare wasm: "+t),tt(t)}))}function r(){if(h||"function"!==typeof WebAssembly.instantiateStreaming||nt(it)||"function"!==typeof fetch)return a(i);fetch(it,{credentials:"same-origin"}).then((function(e){var n=WebAssembly.instantiateStreaming(e,t);return n.then(i,(function(t){f("wasm streaming compile failed: "+t),f("falling back to ArrayBuffer instantiation"),a(i)}))}))}if(Q("wasm-instantiate"),e["instantiateWasm"])try{var s=e["instantiateWasm"](t,n);return s}catch(o){return f("Module.instantiateWasm callback failed with error: "+o),!1}return r(),{}}function ot(){return S.length}function ct(t){try{return d.grow(t-D.byteLength+65535>>16),W(d.buffer),1}catch(e){}}function lt(t){var e=ot(),n=65536,i=2147483648-n;if(t>i)return!1;var a=16777216,r=Math.max(e,a);while(r<t)r=r<=536870912?L(2*r,n):Math.min(L((3*r+2147483648)/4,n),i);var s=ct(r);return!!s}function ut(t){return t=+t,t>=0?+J(t+.5):+$(t-.5)}nt(it)||(it=u(it)),_.push({func:function(){ft()}});var ht={b:lt,memory:d,a:ut,table:v},dt=st();e["asm"]=dt;var pt,ft=e["___wasm_call_ctors"]=function(){return e["asm"]["c"].apply(null,arguments)},vt=(e["_dewarp"]=function(){return e["asm"]["d"].apply(null,arguments)},e["_malloc"]=function(){return e["asm"]["e"].apply(null,arguments)},e["_free"]=function(){return e["asm"]["f"].apply(null,arguments)},e["stackSave"]=function(){return e["asm"]["g"].apply(null,arguments)}),gt=e["stackAlloc"]=function(){return e["asm"]["h"].apply(null,arguments)},bt=e["stackRestore"]=function(){return e["asm"]["i"].apply(null,arguments)};function mt(t){function n(){pt||(pt=!0,g||(H(),z(),e["onRuntimeInitialized"]&&e["onRuntimeInitialized"](),F()))}t=t||s,X>0||(U(),X>0||(e["setStatus"]?(e["setStatus"]("Running..."),setTimeout((function(){setTimeout((function(){e["setStatus"]("")}),1),n()}),1)):n()))}if(e["asm"]=dt,e["ccall"]=w,e["then"]=function(t){if(pt)t(e);else{var n=e["onRuntimeInitialized"];e["onRuntimeInitialized"]=function(){n&&n(),t(e)}}return e},Y=function t(){pt||mt(),pt||(Y=t)},e["run"]=mt,e["preInit"]){"function"==typeof e["preInit"]&&(e["preInit"]=[e["preInit"]]);while(e["preInit"].length>0)e["preInit"].pop()()}function wt(t){var n=t.length*t.BYTES_PER_ELEMENT,i=e._malloc(n);return e.HEAPU8.set(new Uint8Array(t.buffer),i),i}return!0,mt(),e["dewarp"]=function(t,n,i,a,r,s,o,c,l,u,h,d){var p=wt(t),f=wt(s),v=wt(o),g=wt(c),b=wt(l),m=wt(u),w=wt(h),y=e.ccall("dewarp","number",["number","number","number","number","number","number","number","number","number","number","number","number"],[p,n,i,a,r,f,v,g,b,m,w,d]),C=new Uint8ClampedArray(4*a*r);return C.set(new Uint8ClampedArray(e.HEAPU8.buffer,y,4*a*r)),e._free(p),e._free(y),e._free(f),e._free(v),e._free(g),e._free(b),e._free(m),e._free(w),C},e}}();"object"===r(e)&&"object"===r(t)?t.exports=s:(i=[],a=function(){return s}.apply(e,i),void 0===a||(t.exports=a))}).call(this,n("62e4")(t))},efcd:function(t,e,n){t.exports=n.p+"a9746bb8c5bef75abe242a2631c5bbb2.wasm"}});
//# sourceMappingURL=app.5ebf24d4.js.map